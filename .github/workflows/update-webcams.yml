name: Update Webcam Images Hourly

on:
  schedule:
    - cron: "0 * * * *"  # Every hour at minute 0 
  workflow_dispatch:      # Allows manual trigger

jobs:
  update-images:
    runs-on: ubuntu-latest

    steps:
      # 1️⃣ Checkout your repository
      - name: Checkout repository
        uses: actions/checkout@v3

      # 2️⃣ Download latest webcam snapshots
      - name: Download webcam snapshots
        run: |
          mkdir -p images
          curl -L https://www.nps.gov/webcams-yell/washburn_ne.jpg -o images/window001.jpg
          curl -L https://www.nps.gov/webcams-yell/washburn_sw.jpg -o images/window002.jpg
          curl -L https://www.nps.gov/webcams-yell/mammoth_parade.jpg -o images/window003.jpg
          curl -L https://volcanoes.usgs.gov/observatories/hvo/cams/V1cam/images/M.jpg -o images/window004.jpg
          curl -L https://www.nps.gov/webcams-vall/valle_grande_cabin_webcam.jpg -o images/window005.jpg
          curl -L https://www.nps.gov/webcams-redw/Bald_Hills.jpg -o images/window006.jpg
          curl -L https://cdn.pixelcaster.com/public.pixelcaster.com/snapshots/grandcanyon-1/latest.jpg -o images/window007.jpg
          curl -L https://www.nps.gov/webcams-bost/north-001.jpeg -o images/window008.jpg  
          curl -L https://volcanoes.usgs.gov/observatories/hvo/cams/R3cam/images/M.jpg -o images/window009.jpg
          

      # 3️⃣ Commit & push changes using GITHUB_TOKEN
      - name: Commit updated images
        env:
          REPO_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"
          git add images/
          git commit -m "Hourly webcam update" || echo "No changes to commit"
          git push https://x-access-token:${REPO_TOKEN}@github.com/${{ github.repository }}.git HEAD:${{ github.ref }}
