name: Update Webcam Images Hourly

on:
  schedule:
    - cron: "0 * * * *"  # Every hour at minute 0 
  workflow_dispatch:      # Allows manual trigger

jobs:
  update-images:
    runs-on: ubuntu-latest

    steps:
      # 1️⃣ Checkout your repository
      - name: Checkout repository
        uses: actions/checkout@v3

      # 2️⃣ Download latest webcam snapshots
      - name: Download webcam snapshots
        run: |
          mkdir -p images
          curl -L https://www.nps.gov/webcams-yell/washburn_ne.jpg -o images/window001.jpg
          curl -L https://www.nps.gov/webcams-yell/washburn_sw.jpg -o images/window002.jpg
          curl -L https://www.nps.gov/webcams-yell/mammoth_parade.jpg -o images/window003.jpg
          curl -L https://volcanoes.usgs.gov/observatories/hvo/cams/V1cam/images/M.jpg -o images/window004.jpg
          curl -L https://www.nps.gov/webcams-vall/valle_grande_cabin_webcam.jpg -o images/window005.jpg
          curl -L https://www.nps.gov/webcams-redw/Bald_Hills.jpg -o images/window006.jpg
          curl -L https://cdn.pixelcaster.com/public.pixelcaster.com/snapshots/grandcanyon-1/latest.jpg -o images/window007.jpg
          curl -L https://www.nps.gov/webcams-bost/north-001.jpeg -o images/window008.jpg  
          curl -L https://volcanoes.usgs.gov/observatories/hvo/cams/R3cam/images/M.jpg -o images/window009.jpg
          curl -L https://www.nps.gov/webcams-crla/camerasinnott.jpg -o images/window010.jpg
          curl -L https://www.nps.gov/webcams-gumo/gumo2.jpg -o images/window011.jpg
          curl -L https://www.nps.gov/webcams-romo/kawuneeche_valley.jpeg -o images/window012.jpg
          curl -L https://www.nps.gov/webcams-romo/glacier_basin.jpeg -o images/window013.jpg
          curl -L https://www.nps.gov/webcams-glac/LakeMcDonald1.jpg -o images/window014.jpg
          curl -L https://www.nps.gov/webcams-glac/ApgarLookout-01.jpg -o images/window015.jpg
          curl -L https://www.nps.gov/webcams-glac/MiddleForkBridge.jpg -o images/window016.jpg
          curl -L https://www.nps.gov/webcams-mora/tatoosh.jpg -o images/window017.jpg
          curl -L https://usgs-nims-images.s3.amazonaws.com/overlay/CA_Merced_River_at_Happy_Isles_Bridge_Yosemite/CA_Merced_River_at_Happy_Isles_Bridge_Yosemite_newest.jpg -o images/window018.jpg
          curl -L https://www.nps.gov/webcams-whis/VC-Cam.jpg -o images/window019.jpg
          curl -L https://www.nps.gov/webcams-redw/Jed_Smith.jpg -o images/window020.jpg
          curl -L https://www.nps.gov/webcams-isro/WashingtonHarbor.jpg -o images/window021.jpg
          curl -L https://volcanoes.usgs.gov/observatories/hvo/cams/MKcam/images/M.jpg -o images/window022.jpg
          curl -L https://cdn.pixelcaster.com/public.pixelcaster.com/snapshots/grandcanyon-2/latest.jpg -o images/window023.jpg
          curl -L https://www.nps.gov/webcams-zion/camera2.jpg -o images/window024.jpg
          curl -L https://www.nps.gov/webcams-joda/PaintedHills.jpg -o images/window025.jpg
          curl -L https://pixelcaster.com/yosemite/webcams/ahwahnee2.jpg -o images/window026.jpg
          curl -L https://www.nps.gov/webcams-glca/po1.jpg -o images/window027.jpg
          curl -L https://www.nps.gov/webcams-colm/image.jpg -o images/window028.jpg
          

      # 3️⃣ Commit & push changes using GITHUB_TOKEN
      - name: Commit updated images
        env:
          REPO_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"
          git add images/
          git commit -m "Hourly webcam update" || echo "No changes to commit"
          git push https://x-access-token:${REPO_TOKEN}@github.com/${{ github.repository }}.git HEAD:${{ github.ref }}
